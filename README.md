## 一个使用 micro-app 和 webpack 5 模块联邦搭建的微前端设想架构 (A hypothetical micro-frontend architecture using micro-app and webpack 5 module federation)  

# 设想架构  

选取一个社区中的微前端框架（qiankun/micro-app/wujie...）搭建基座应用  
这个基座微应用提供沙箱隔离、应用间通信、基础配置、规范路由等内容。  
但是这样会有一个问题：如何跨微应用共享代码呢？  
简单的变量或者函数我们可以通过挂载到基座 window 对象上来向各个微应用传递；  
但当我们要共享一个组件/共享一个庞大的第三方库时，挂载在你 window 上似乎就不喝水了。  
好在我们迎来了 webpack 5 的模块联邦特性——这个号称下一代微前端方案的特性；  
我能不能开始把下一代纳入规划不确定，但是我期望可以通过它来解决上一代微前端方案的问题——代码共享。  

# 当前的堵点  

当前的 微应用 app1 (远程模块消费者) 和 app2 (远程模块生产者) 都是可以正常独立运行的；  
在基座 container 中，app2 (远程模块生产者) 也是可以嵌入运行的；  
但是 在基座 container 中的 app1 (远程模块消费者) 不能正常运行，这是目前的需要解决的问题。  
目前上一代微前端框架 (比如qiankun、micro-app) 似乎对模块联邦的支持程度都很有限，  
所以，需要给社区一点时间，也需要给我一点时间。

# 运行  

1、pnpm i   
2、pnpm dev  
